# Merchant X Payment API

##### Steps:

1. The customer sends their payment information to the merchant's web site.
2. The merchant web site posts the payment data to the Payment Gateway.
3. The Payment Gateway responds immediately with the results of the transactions.
4. The merchant web site displays the appropriate message to the customer.

The communication method used to send messages to the Payment Gateway's server is the standard HTTP protocol over an SSL connection.

In the Payment API method, the communications with the cardholder (Steps 1 and 4) are developed completely by the merchant and therefore are not defined by the Payment Gateway. Step 1 should simply collect the payment data from the cardholder and Step 4 should display the appropriate transaction receipt or declined message.

In Step 2, transaction details should be delivered to the Payment Gateway using the POST method with the appropriate variables defined below posted along with the request.

In Step 3, the transaction responses are returned in the body of the HTTP response in a query string name/value format delimited by ampersands. For example: variable1=value1&variable2=value2&variable3=value3

## Customer Vault

The Customer Vault was designed specifically for businesses of any size to address concerns about handling customer payment information. Visa and MasterCard have instituted the Payment Card Industry (PCI) Data Security to protect cardholder data, wherever it resides, ensuring that members, merchants, and service providers maintain the highest information security standards.

These associations have also deemed that merchants will be held liable for any breach of cardholder data. This has become a major concern for merchants who handle credit card or electronic check payments. The Customer Vault is designed for these merchants who desire to avoid the tremendous costs and resources involved in becoming PCI compliant under these circumstances.

The Customer Vault does this by allowing merchants to transmit their payment information through a Secure Sockets Layer (SSL) connection for storage in our Level 1 PCI certified data facility. Once the customer record has been securely transmitted to the Customer Vault, the merchant can then initiate transactions remotely without having to access cardholder information directly. This process is accomplished without the merchant storing the customer's payment information in their local database or payment application.

# Transaction Types

Payment API

## Sale (sale)

Transaction sales are submitted and immediately flagged for settlement.

## Authorization (auth)

Transaction authorizations are authorized immediately but are not flagged for settlement. These transactions must be flagged for settlement using the capture transaction type.

## Capture (capture)

Transaction captures flag existing authorizations for settlement. Only authorizations can be captured. Captures can be submitted for an amount equal to or less than the original authorization.

## Void (void)

Transaction voids will cancel an existing sale or captured authorization. In addition, non-captured authorizations can be voided to prevent any future capture. Voids can only occur if the transaction has not been settled.

## Refund (refund)

Transaction refunds will reverse a previously settled or pending settlement transaction. If the transaction has not been settled, a transaction void can also reverse it.

## Credit (credit)

Transaction credits apply an amount to the cardholder's card that was not originally processed through the Gateway. In most situations credits are disabled as transaction refunds should be used instead.

## Validate (validate)

This action is used for doing an "Account Verification" on the cardholder's credit card without actually doing an authorization.

## Update (update)

Transaction updates can be used to update previous transactions with specific order information, such as a tracking number and shipping carrier.

# Transaction Variables

Payment API

## POST URL

POST URL:

https://merchantx.transactiongateway.com/api/transact.php

## Sale/Authorization/Credit/Validate/Offline

Variable Name

Description

type\*

The type of transaction to be processed.  
Values: 'sale', 'auth', 'credit', 'validate', or 'offline'

security_key\*

API Security Key assigned to a merchant account.  
New keys can be generated from the merchant control panel in Settings > Security Keys

payment_token

The tokenized version of the customer's card or check information. This will be generated by [Collect.js](https://merchantx.transactiongateway.com/merchants/resources/integration/integration_portal.php#cjs_methodology) and is usable only once.

transaction_session_id‡‡‡‡

A single use session ID used by Kount to link the transaction and Data Collector information together. This ID should be generated every time a payment form is loaded by the cardholder, and be random/unpredictable (do not use sequential IDs). This ID should not be reused within a 30 day period. This can be used with [Collect.js](https://merchantx.transactiongateway.com/merchants/resources/integration/integration_portal.php#cjs_methodology) or the Payment API when using the [Kount DDC with Gateway.js.](https://merchantx.transactiongateway.com/merchants/resources/integration/integration_portal.php#gjs_methodology)  
Format: alphanumeric, 32 characters required

googlepay_payment_data

The encrypted token created when [integration directly to the Google Pay SDK](https://merchantx.transactiongateway.com/merchants/resources/integration/integration_portal.php#googlepay_variables).

ccnumber\*\*

Credit card number.

ccexp\*\*

Credit card expiration date.  
Format: MMYY

cvv

The card security code. While this is not required, it is strongly recommended.

checkname\*\*\*

The name on the customer's ACH account.

checkaba\*\*\*

The customer's bank routing number.

checkaccount\*\*\*

The customer's bank account number.

account_holder_type

The type of ACH account the customer has.  
Values: 'business' or 'personal'

account_type

The ACH account entity of the customer.  
Values: 'checking' or 'savings'

sec_code

The Standard Entry Class code of the ACH transaction.  
Values: 'PPD', 'WEB', 'TEL', or 'CCD'

checkaccountvalidation

Use account validation on this ACH transaction.  
Supported on iStream only. Values: 'true' or 'false'

amount

Total amount to be charged. For validate, the amount must be omitted or set to 0.00.  
Format: x.xx

surcharge

Surcharge amount.  
Format: x.xx

convenience_fee

Convenience fee amount.  
Format: x.xx

misc_fee

Miscellaneous fee amount.  
Format: x.xx

misc_fee_name

Custom miscellaneous fee name.  
Default: Miscellaneous Fee

cash_discount

How much less a customer paid due to a cash discount.  
Format: x.xx, only applicable to cash and check transactions

tip

The final tip amount, included in the transaction, associated with the purchase  
Format: x.xx

currency

The transaction currency. Format: ISO 4217

payment\*\*\*

The type of payment.  
Default: 'creditcard'  
Values: 'creditcard', 'check', or 'cash'

processor_id

If using Multiple MIDs, route to this processor (processor_id is obtained under Settings → Transaction Routing in the Control Panel).

authorization_code‡

Specify authorization code. For use with "offline" action only.

dup_seconds

Sets the time in seconds for duplicate transaction checking on supported processors. Set to 0 to disable duplicate checking. This value should not exceed 7862400.

descriptor

Set payment descriptor on supported processors.

descriptor_phone

Set payment descriptor phone on supported processors.

descriptor_address

Set payment descriptor address on supported processors.

descriptor_city

Set payment descriptor city on supported processors.

descriptor_state

Set payment descriptor state on supported processors.

descriptor_postal

Set payment descriptor postal code on supported processors.

descriptor_country

Set payment descriptor country on supported processors.

descriptor_mcc

Set payment descriptor mcc on supported processors.

descriptor_merchant_id

Set payment descriptor merchant id on supported processors.

descriptor_url

Set payment descriptor url on supported processors.

billing_method

Should be set to 'recurring' to mark payment as a recurring transaction or 'installment' to mark payment as an installment transaction.  
Values: 'recurring', 'installment'

billing_number

Specify installment billing number, on supported processors. For use when "billing_method" is set to installment.  
Values: 0-99

billing_total

Specify installment billing total on supported processors. For use when "billing_method" is set to installment.

order_template

Order template ID.

order_description

Order description.  
Legacy variable includes: orderdescription

orderid

Order Id

ipaddress

IP address of cardholder, this field is recommended.  
Format: xxx.xxx.xxx.xxx

tax\*\*\*\*

The sales tax included in the transaction amount associated with the purchase. Setting tax equal to any negative value indicates an order that is exempt from sales tax.  
Default: '0.00'  
Format: x.xx

shipping\*\*\*\*

Total shipping amount.

ponumber\*\*\*\*

Original purchase order.

first_name

Cardholder's first name.  
Legacy variable includes: firstname

last_name

Cardholder's last name  
Legacy variable includes: lastname

company

Cardholder's company

address1

Card billing address

address2

Card billing address, line 2

city

Card billing city

state

Card billing state.  
Format: CC

zip

Card billing zip code

country

Card billing country.  
Country codes are as shown in ISO 3166. Format: CC

phone

Billing phone number

fax

Billing fax number

email

Billing email address

social_security_number

Customer's social security number, checked against bad check writers database if check verification is enabled.

drivers_license_number

Driver's license number.

drivers_license_dob

Driver's license date of birth.

drivers_license_state

The state that issued the customer's driver's license.

shipping_firstname

Shipping first name

shipping_lastname

Shipping last name

shipping_company

Shipping company

shipping_address1

Shipping address

shipping_address2

Shipping address, line 2

shipping_city

Shipping city

shipping_state

Shipping state  
Format: CC

shipping_zip

Shipping zip code

shipping_country

Shipping country  
Country codes are as shown in ISO 3166. Format: CC

shipping_email

Shipping email address

merchant*defined_field*#

You can pass custom information in up to 20 fields.  
Format: merchant_defined_field_1=Value

customer_receipt

If set to true, when the customer is charged, they will be sent a transaction receipt.  
Values: 'true' or 'false'

signature_image

Cardholder signature image. For use with "sale" and "auth" actions only.  
Format: base64 encoded raw PNG image. (16kiB maximum)

cardholder_auth‡‡

Set 3D Secure condition. Value used to determine E-commerce indicator (ECI).  
Values: 'verified' or 'attempted'

cavv‡‡

Cardholder authentication verification value.  
Format: base64 encoded

xid‡‡

Cardholder authentication transaction id.  
Format: base64 encoded

three_ds_version‡‡

3DSecure version.  
Examples: "2.0.0" or "2.2.0"

directory_server_id

Directory Server Transaction ID. May be provided as part of 3DSecure 2.0 authentication.  
Format: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx

source_transaction_id

Specifies a payment gateway transaction id in order to associate payment information with a Subscription or Customer Vault record. Must be set with a 'recurring' or 'customer_vault' action.

pinless_debit_override

Set to 'Y' if you have Pinless Debit Conversion enabled but want to opt out for this transaction. Feature applies to selected processors only.

sca_exemption

Specifies an exemption to Strong Customer Authentication (SCA) requirements for a transaction. Qualifying transactions bypass additional authentication steps. Available on select Processors; contact your Account Manager for details.  
Values: "na", "low_value", "tra_exemption", "trusted_merchant", "secure_corporate_payment", "merchant_initiated_transaction", "recurring_payment", or "sca_delegation"

Recurring specific fields

recurring

Recurring action to be processed.  
Values: add_subscription

plan_id

Create a subscription tied to a Plan ID if the sale/auth transaction is successful.

plan_payments

The number of payments before the recurring plan is complete.  
Note: Use '0' for 'until canceled'

plan_amount

The plan amount to be charged each billing cycle.  
Format: x.xx

day_frequency

How often, in days, to charge the customer. Cannot be set with 'month_frequency' or 'day_of_month'.

month_frequency

How often, in months, to charge the customer. Cannot be set with 'day_frequency'. Must be set with 'day_of_month'.  
Values: 1 through 24

day_of_month

The day that the customer will be charged. Cannot be set with 'day_frequency'. Must be set with 'month_frequency'.  
Values: 1 through 31 - for months without 29, 30, or 31 days, the charge will be on the last day

start_date

The first day that the customer will be charged.  
Format: YYYYMMDD

Customer Vault specific fields

customer_vault

Associate payment information with a Customer Vault record if the transaction is successful.  
Values: 'add_customer' or 'update_customer'

customer_vault_id

Specifies a Customer Vault id. If not set, the payment gateway will randomly generate a Customer Vault id.

Customer Token Vault specific fields

network_tokenize

Overrides the Customer Token Vault settings and tokenizes the transaction if eligible.  
Values: '0 (false)' or '1 (true)'  
Default: '0'

Stored Credentials (CIT/MIT)

initiated_by

Who initiated the transaction.  
Values: 'customer' or 'merchant'

initial_transaction_id

Original payment gateway transaction id.

stored_credential_indicator

The indicator of the stored credential.  
Values: 'stored' or 'used'  
Use **'stored'** when processing the initial transaction in which you are storing a customer's payment details (customer credentials) in the Customer Vault or other third-party payment storage system.  
Use **'used'** when processing a subsequent or follow-up transaction using the customer payment details (customer credentials) you have already stored to the Customer Vault or third-party payment storage method.

Level III specific order fields

shipping†

Freight or shipping amount included in the transaction amount.  
Default: '0.00'  
Format: x.xx

tax†

The sales tax, included in the transaction amount, associated with the purchase. Setting tax equal to any negative value indicates an order that is exempt from sales tax.  
Default: '0.00'  
Format: x.xx

ponumber†

Purchase order number supplied by cardholder

orderid†

Identifier assigned by the merchant. This defaults to gateway transaction id.

shipping_country†

Shipping country (e.g. US)  
Format: CC

shipping_postal†

Postal/ZIP code of the address where purchased goods will be delivered. This field can be identical to the 'ship_from_postal' if the customer is present and takes immediate possession of the goods.

ship_from_postal†

Postal/ZIP code of the address from where purchased goods are being shipped, defaults to merchant profile postal code.

summary_commodity_code†

4 character international description code of the overall goods or services being supplied. The acquirer or processor will provide a list of current codes.

duty_amount

Amount included in the transaction amount associated with the import of purchased goods.  
Default: '0.00'  
Format: x.xx

discount_amount

Amount included in the transaction amount of any discount applied to complete order by the merchant.  
Default: '0.00'  
Format: x.xx

national_tax_amount

The national tax amount included in the transaction amount.  
Default: '0.00'  
Format: x.xx

alternate_tax_amount

Second tax amount included in the transaction amount in countries where more than one type of tax can be applied to the purchases.  
Default: '0.00'  
Format: x.xx

alternate_tax_id

Tax identification number of the merchant that reported the alternate tax amount.

vat_tax_amount

Contains the amount of any value added taxes which can be associated with the purchased item.  
Default: '0.00'  
Format: x.xx

vat_tax_rate

Contains the tax rate used to calculate the sales tax amount appearing. Can contain up to 2 decimal places, e.g. 1% = 1.00.  
Default: '0.00'  
Format: x.xx

vat_invoice_reference_number

Invoice number that is associated with the VAT invoice.

customer_vat_registration

Value added tax registration number supplied by the cardholder.

merchant_vat_registration

Government assigned tax identification number of the merchant for whom the goods or services were purchased from.

order_date

Purchase order date, defaults to the date of the transaction.  
Format: YYMMDD

Level III specific line item detail fields

item*product_code*#†

Merchant defined description code of the item being purchased.

item*description*#†

Description of the item(s) being supplied.

item*commodity_code*#†

International description code of the individual good or service being supplied. The acquirer or processor will provide a list of current codes.

item*unit_of_measure*#†

Code for units of measurement as used in international trade.  
Default: 'EACH'

item*unit_cost*#†

Unit cost of item purchased, may contain up to 4 decimal places.

item*quantity*#†

Quantity of the item(s) being purchased.  
Default: '1'

item*total_amount*#†

Purchase amount associated with the item. Defaults to: 'item*unit_cost*#' x 'item*quantity*#' rounded to the nearest penny.

item*tax_amount*#†

Amount of sales tax on specific item. Amount should not be included in 'total*amount*#'.  
Default: '0.00'  
Format: x.xx

item*tax_rate*#†

Percentage representing the value-added tax applied.  
Default: '0.00'

item*discount_amount*#

Discount amount which can have been applied by the merchant on the sale of the specific item. Amount should not be included in 'total*amount*#'.

item*discount_rate*#

Discount rate for the line item. 1% = 1.00.  
Default: '0.00'

item*tax_type*#

Type of value-added taxes that are being used.

item*alternate_tax_id*#

Tax identification number of the merchant that reported the alternate tax amount.

Payment Facilitator Specific Fields

payment_facilitator_id‡‡‡

Payment Facilitator/Aggregator/ISO's ID Number

submerchant_id‡‡‡

Sub-merchant Account ID

submerchant_name‡‡‡

Sub-merchant's Name

submerchant_address‡‡‡

Sub-merchant's Address

submerchant_city‡‡‡

Sub-merchant's City

submerchant_state‡‡‡

Sub-merchant's State

submerchant_postal‡‡‡

Sub-merchant's Zip/Postal Code

submerchant_country‡‡‡

Sub-merchant's Country

submerchant_phone‡‡‡

Sub-merchant's Phone Number

submerchant_email‡‡‡

Sub-merchant's Email Address

submerchant_url‡‡‡

Sub-merchant's URL

submerchant_airn‡‡‡

Sub-merchant's Acquirer Internal Reference Number, used for Discover transactions

-

Always required

\*\*

Required for credit card transactions

---

Required for ACH transactions

---

Required for Level 2 transactions

†

Required for Level 3 transactions

‡

Required for offline transactions

‡‡

Required for 3D Secure transactions

‡‡‡

Required fields for Payment Facilitator enabled transactions vary by card brand

‡‡‡‡

Required for API transactions using the Kount Service

#### Notes:

- Level II fields are required for Level II processing.
- Level II and Level III fields are required for Level III processing.
- You can pass only credit card or e-check transaction variables in a request, not both in the same request.
- Certain banks may require some optional fields.
- Some characters output from base64 encoding can not be passed directly into the API (i.e. "+") so ensure these fields are also properly URL encoded.

## Capture

Variable Name

Description

type\*

Type of transaction.  
Values: 'capture'

security_key\*

API Security Key assigned to a merchant account.  
New keys can be generated from the merchant control panel in Settings > Security Keys

transactionid\*

Original payment gateway transaction id

amount\*

Total amount to be settled. This amount must be equal to or less than the original authorized amount.  
Format: x.xx

tracking_number

Shipping tracking number

shipping_carrier

Shipping carrier.  
Values: 'ups', 'fedex', 'dhl', or 'usps'

orderid

Order id.

signature_image

Cardholder signature image.  
Format: base64 encoded raw PNG image. (16kiB maximum)

-

Always required

## Void

Variable Name

Description

type\*

Type of transaction.  
Values: 'void'

security_key\*

API Security Key assigned to a merchant account.  
New keys can be generated from the merchant control panel in Settings > Security Keys

transactionid\*

Original payment gateway transaction id

void_reason\*\*

Reason the EMV transaction is being voided.  
Values: 'fraud', 'user_cancel', 'icc_rejected', 'icc_card_removed', 'icc_no_confirmation', or 'pos_timeout'

payment\*\*\*

The type of payment.  
Default: 'creditcard'  
Values: 'creditcard' or 'check'

-

Always required

\*\*

Conditionally required for EMV transactions

---

Required for ACH transactions

## Refund

Variable Name

Description

type\*

Type of transaction.  
Values: 'refund'

security_key\*

API Security Key assigned to a merchant account.  
New keys can be generated from the merchant control panel in Settings > Security Keys

transactionid\*

Original payment gateway transaction id

amount

Total amount to be refunded. This amount may be equal to or less than the settled amount. Setting the amount to 0.00 will refund the entire amount.  
Format: x.xx

payment\*\*

The type of payment.  
Default: 'creditcard'  
Values: 'creditcard' or 'check'

-

Always required

\*\*

Required for ACH transactions

## Update

Variable Name

Description

type\*

Type of transactions.  
Values: 'update'

security_key\*

API Security Key assigned to a merchant account.  
New keys can be generated from the merchant control panel in Settings > Security Keys

transactionid\*

Original payment gateway transaction id

payment\*\*

The type of payment.  
Default: 'creditcard'  
Values: 'creditcard' or 'check'

tracking_number

Shipping tracking number

shipping

Total shipping amount.  
Format: x.xx

shipping_postal

Postal/ZIP code of the address where purchased goods will be delivered. This field can be identical to the 'ship_from_postal' if the customer is present and takes immediate possession of the goods.

ship_from_postal

Postal/ZIP code of the address from where purchased goods are being shipped, defaults to merchant profile postal code.

shipping_country

Shipping Country Code.

shipping_carrier

Shipping carrier.  
Values: 'ups', 'fedex', 'dhl', or 'usps'

shipping_date

Shipping date.  
Format: YYYYMMDD

order_description

Order Description.  
Legacy variable includes: orderdescription

order_date

Order date.  
Format: YYYYMMDD

customer_receipt

If set to true, when the customer is charged, they will be sent a transaction receipt.  
Values: 'true' or 'false'

signature_image

Cardholder signature image.  
Format: base64 encoded raw PNG image. (16kiB maximum)

ponumber

Cardholder's purchase order number.

summary_commodity_code

4 character international description code of the overall goods or services being supplied. The acquirer or processor will provide a list of current codes.

duty_amount

Amount included in the transaction amount associated with the import of purchased goods.  
Format: x.xx

discount_amount

Amount included in the transaction amount of any discount applied to complete order by the merchant.  
Format: x.xx

tax

The sales tax, included in the transaction amount, associated with the purchase. Setting tax equal to any negative value indicates an order that is exempt from sales tax.  
Default: '0.00'  
Format: x.xx

national_tax_amount

The national tax amount included in the transaction amount.  
Format: x.xx

alternate_tax_amount

Second tax amount included in the transaction amount in countries where more than one type of tax can be applied to the purchases.  
Format: x.xx

alternate_tax_id

Tax identification number of the merchant that reported the alternate tax amount.

vat_tax_amount

Contains the amount of any value added taxes which can be associated with the purchased item.

vat_tax_rate

Contains the tax rate used to calculate the sales tax amount appearing. Can contain up to 2 decimal places, e.g. 1% = 1.00.

vat_invoice_reference_number

Invoice number that is associated with the VAT invoice.

customer_vat_registration

Value added tax registration number supplied by the cardholder.

merchant_vat_registration

Government assigned tax identification number of the merchant for whom the goods or services were purchased from.

merchant*defined_field*#

Merchant Defined Fields.  
Format: merchant_defined_field_1=Value

-

Always required

\*\*

Required for ACH transactions

Card billing state.

zip

Card billing postal code.

country

Card billing country code.

phone

Billing phone number.

email

Billing email address.

company

Cardholder's company.

address2

Card billing address, line 2.

fax

Billing fax number.

orderid

Order ID

order_date

Order Date

order_description

Order Description  
Legacy variable includes: orderdescription

merchant*defined_field*#

Can be set up in merchant control panel under 'Settings'->'Merchant Defined Fields'.

ponumber

Cardholder's purchase order number.

processor_id

If using Multiple MIDs, route to this processor (processor_id is obtained under Settings->Transaction Routing in the Control Panel).

customer_receipt

If set to true, when the customer is charged, they will be sent a transaction receipt.  
Values: 'true' or 'false'

source_transaction_id

Specifies a payment gateway transaction id in order to associate payment information with a Subscription record.

acu_enabled

If set to true, credit card will be evaluated and sent based upon Automatic Card Updater settings. If set to false, credit card will not be submitted for updates when Automatic Card Updater runs.  
Default: 'true'  
Values: 'true' or 'false'

paused_subscription

If set to true, the subscription will be paused.  
Values: 'true' or 'false'

-

Always required

## Delete a Subscription

Variable Name

Description

recurring\*

Delete the subscription. Customer will no longer be charged.  
Value: 'delete_subscription'

subscription_id\*

The subscription ID that will be deleted.

-

Always required

# Invoicing Variables

Payment API

## POST URL

POST URL:

https://merchantx.transactiongateway.com/api/transact.php

## Create Invoice

Variable Name

Description

invoicing\*

Create a new invoice and email it to the customer.  
Values: 'add_invoice'

security_key\*

API Security Key assigned to a merchant account.  
New keys can be generated from the merchant control panel in Settings > Security Keys

amount\*

Total amount to be invoiced. Must be greater than 0.00.  
Format: x.xx

email\*

Billing email address  
An invoice will be sent to this address when it is created.

payment_terms

When the invoice should be paid  
Default: 'upon_receipt'  
Values: 'upon_receipt', or integers from 0-999.

payment_methods_allowed

What payment methods a customer may use when paying invoice.  
Defaults to all available payment methods available in your merchant account  
Values: 'cc', 'ck', and 'cs'. Multiple payment types can be selected by comma-separating values.

processor_id

If using Multiple MIDs, route to this processor (processor_id is obtained under Settings → Transaction Routing in the Control Panel).  
If allowing multiple payment types, one processor_id can be selected per payment type by submitting comma-separated values.

currency

The transaction currency.  
Format: ISO 4217

order_description

Order description.  
Legacy variable includes: orderdescription

orderid

Order ID.

customer_id

Customer ID.

customer_tax_id

Customer Tax ID.

tax

Total sales tax amount.

shipping

Total shipping amount.

ponumber

Original purchase order.

first_name

Cardholder's first name.  
Legacy variable includes: firstname

last_name

Cardholder's last name.  
Legacy variable includes: lastname

company

Cardholder's company.

address1

Card billing address.

address2

Card billing address, line 2.

city

Card billing city.

state

Card billing state.  
Format: CC

zip

Card billing zip code.

country

Card billing country.  
Country codes are as shown in ISO 3166. Format: CC

phone

Billing phone number.

fax

Billing fax number.

website

Customer website.

shipping_firstname

Shipping first name.

shipping_lastname

Shipping last name.

shipping_company

Shipping company.

shipping_address1

Shipping address.

shipping_address2

Shipping address, line 2.

shipping_city

Shipping city.

shipping_state

Shipping state.  
Format: CC

shipping_zip

Shipping zip code.

shipping_country

Shipping country.  
Country codes are as shown in ISO 3166. Format: CC

shipping_email

Shipping email address.

merchant*defined_field*#

You can pass custom information in up to 20 fields.  
Format: merchant_defined_field_1=Value

Product Information

item*product_code*#

Merchant defined description code of the item being purchased.

item*description*#

Description of the item(s) being supplied.

item*commodity_code*#

International description code of the individual good or service being supplied. The acquirer or processor will provide a list of current codes.

item*unit_of_measure*#

Code for units of measurement as used in international trade.  
Default: 'EACH'

item*unit_cost*#

Unit cost of item purchased, may contain up to 4 decimal places.

item*quantity*#

Quantity of the item(s) being purchased.  
Default: '1'

item*total_amount*#

Purchase amount associated with the item. Defaults to: 'item*unit_cost*#' x 'item*quantity*#' rounded to the nearest penny.

item*tax_amount*#

Amount of sales tax on specific item. Amount should not be included in 'total*amount*#'.  
Default: '0.00'  
Format: x.xx

item*tax_rate*#

Percentage representing the value-added tax applied.  
Default: '0.00'

item*discount_amount*#

Discount amount which can have been applied by the merchant on the sale of the specific item. Amount should not be included in 'total*amount*#'.

item*discount_rate*#

Discount rate for the line item. 1% = 1.00.  
Default: '0.00'

item*tax_type*#

Type of value-added taxes that are being used.

item*alternate_tax_id*#

Tax identification number of the merchant that reported the alternate tax amount.

-

Always required

## Update Invoice

Variable Name

Description

invoicing\*

Update an existing invoice.  
Values: 'update_invoice'

security_key\*

API Security Key assigned to a merchant account.  
New keys can be generated from the merchant control panel in Settings > Security Keys

invoice_id\*

The invoice ID to be updated.

-

Always required

#### Notes:

All variables (besides currency) on an invoice may be updated. Updating an invoice will not result in a new invoice being sent to the customer. To send the invoice after updating an invoice, use the send_invoice request after making changes.

## Send Invoice

Variable Name

Description

invoicing\*

Send an existing invoice to a customer.  
Values: 'send_invoice'

security_key\*

API Security Key assigned to a merchant account.  
New keys can be generated from the merchant control panel in Settings > Security Keys

invoice_id\*

The invoice ID to be emailed.

-

Always required

#### Notes:

The invoice will be sent to the billing email address assigned to the invoice.

## Close Invoice

Variable Name

Description

invoicing\*

The invoice to be closed.  
Values: 'close_invoice'

security_key\*

API Security Key assigned to a merchant account.  
New keys can be generated from the merchant control panel in Settings > Security Keys

invoice_id\*

The invoice ID to be closed.

-

Always required

# Customer Vault Variables

Payment API

## POST URL

POST URL:

https://merchantx.transactiongateway.com/api/transact.php

## Add/Update Customer Record

Variables

Description

customer_vault\*

Add/Update a secure Customer Vault record.  
Values: 'add_customer' or 'update_customer'

customer_vault_id

Specifies a Customer Vault id. If not set, the payment gateway will randomly generate a Customer Vault id.

billing_id

Billing id to be assigned or updated. If none is provided, one will be created or the billing id with priority '1' will be updated.

security_key\*

API Security Key assigned to a merchant account.  
New keys can be generated from the merchant control panel in Settings > Security Keys

payment_token

The tokenized version of the customer's card or check information. This will be generated by [Collect.js](https://merchantx.transactiongateway.com/merchants/resources/integration/integration_portal.php#cjs_methodology) and is usable only once.

googlepay_payment_data

The encrypted token created when [integration directly to the Google Pay SDK](https://merchantx.transactiongateway.com/merchants/resources/integration/integration_portal.php#googlepay_variables).

ccnumber\*\*

Credit card number.

ccexp\*\*

Credit card expiration.  
Format: MMYY

checkname\*\*\*

The name on the customer's ACH account.

checkaba\*\*\*

The customer's bank routing number.

checkaccount\*\*\*

The customer's bank account number.

account_holder_type

The customer's ACH account entity.  
Values: 'personal' or 'business'

account_type

The customer's ACH account type.  
Values: 'checking' or 'savings'

sec_code

ACH standard entry class codes.  
Values: 'PPD', 'WEB', 'TEL', or 'CCD'

currency

Set transaction currency.

payment

Set payment type to ACH or credit card.  
Values: 'creditcard' or 'check'

orderid

Order id

order_description

Order Description  
Legacy variable includes: orderdescription

merchant*defined_field*#

Can be set up in merchant control panel under 'Settings'->'Merchant Defined Fields'.  
Format: merchant_defined_field_1=Value

first_name

Cardholder's first name.  
Legacy variable includes: firstname

last_name

Cardholder's last name.  
Legacy variable includes: lastname

address1

Card billing address.

city

Card billing city

state

Card billing state.

zip

Card billing postal code.

country

Card billing country code.

phone

Billing phone number.

email

Billing email address.

company

Cardholder's company.

address2

Card billing address, line 2.

fax

Billing fax number.

shipping_id

Shipping entry id. If none is provided, one will be created or the billing id with priority '1' will be updated.

shipping_firstname

Shipping first name.

shipping_lastname

Shipping last name.

shipping_company

Shipping company.

shipping_address1

Shipping address.

shipping_address2

Shipping address, line 2.

shipping_city

Shipping city

shipping_state

Shipping state.

shipping_zip

Shipping postal code.

shipping_country

Shipping country code.

shipping_phone

Shipping phone number.

shipping_fax

Shipping fax number.

shipping_email

Shipping email address.

source_transaction_id

Specifies a payment gateway transaction id in order to associate payment information with a Customer Vault record.

acu_enabled

If set to true, credit card will be evaluated and sent based upon Automatic Card Updater settings. If set to false, credit card will not be submitted for updates when Automatic Card Updater runs.  
Default: 'true'  
Values: 'true' or 'false'

-

Always required

\*\*

Required for credit card transactions

---

Required for ACH transactions

## Customer Vault initiated Sale/Auth/Credit/Offline

Variable

Description

security_key\*

API Security Key assigned to a merchant account.  
New keys can be generated from the merchant control panel in Settings > Security Keys

customer_vault_id\*

Specifies a Customer Vault id.

amount

Total amount to be charged. For validate, the amount must be omitted or set to 0.00.  
Format: x.xx

currency

The transaction currency. Format: ISO 4217

processor_id

If using Multiple MIDs, route to this processor (processor_id is obtained under Settings->Transaction Routing in the Control Panel).

descriptor

Set payment descriptor on supported processors.

descriptor_phone

Set payment descriptor phone on supported processors.

order_description

Order description.  
Legacy variable includes: orderdescription

orderid

Order ID

Stored Credentials (CIT/MIT)

initiated_by

Who initiated the transaction.  
Values: 'customer' or 'merchant'

initial_transaction_id

Original payment gateway transaction id.

stored_credential_indicator

The indicator of the stored credential.  
Values: 'stored' or 'used'  
Use **'stored'** when processing the initial transaction in which you are storing a customer's payment details (customer credentials) in the Customer Vault or other third-party payment storage system.  
Use **'used'** when processing a subsequent or follow-up transaction using the customer payment details (customer credentials) you have already stored to the Customer Vault or third-party payment storage method.

-

Always required

## Delete Customer Record

Variable

Description

customer_vault\*

Deletes a secure Customer Vault record.  
Values: 'delete_customer'

customer_vault_id\*

Specifies a Customer Vault id.

security_key\*

API Security Key assigned to a merchant account.  
New keys can be generated from the merchant control panel in Settings > Security Keys

-

Always required

#### Notes:

- If you do not pass a customer_vault_id, our system will randomly generate one. If you include a customer_id and customer_vault_id, they must match.
- You can only pass Credit Card or Electronic Check transaction variables.
